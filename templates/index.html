<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå¹¹äº‹ãã‚“ - æ—¥ç¨‹èª¿æ•´ä½œæˆ</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: -apple-system, sans-serif; background: #f4f5f7; margin: 0; padding: 15px; padding-bottom: 100px; }
        .container { max-width: 500px; margin: auto; background: white; border-radius: 16px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .section-title { font-size: 0.95rem; font-weight: bold; border-left: 4px solid #00b900; padding-left: 10px; margin: 25px 0 10px; }
        input[type="date"] { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; margin: 5px 0; box-sizing: border-box; }
        .btn-submit { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 90%; max-width: 450px; background: #00b900; color: white; border: none; padding: 16px; border-radius: 30px; font-weight: bold; font-size: 1rem; box-shadow: 0 4px 15px rgba(0,0,0,0.3); cursor: pointer; }
        .note { font-size: 0.8rem; color: #666; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“… æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ</h1>
        
        <div class="section-title">1. é–‹å‚¬æœŸé–“ã‚’é¸æŠ</div>
        <input type="date" id="start"> ã€œ <input type="date" id="end">
        <p class="note">â€»ã“ã®æœŸé–“å†…ã§ã€ã¿ã‚“ãªãŒä¸€ç•ªé›†ã¾ã‚Œã‚‹æ™‚é–“ã‚’AIãŒæ¢ã—ã¾ã™ã€‚</p>

        <div class="section-title">2. æ‹›å¾…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
        <p class="note">æ¬¡ã®ç”»é¢ã§æ‹›å¾…ã—ãŸã„ãƒ¡ãƒ³ãƒãƒ¼ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚å›ç­”æœŸé™ã¯é€ä¿¡ã‹ã‚‰12æ™‚é–“ã¨ãªã‚Šã¾ã™ã€‚</p>

        <button class="btn-submit" onclick="sendInvitation()">ãƒ¡ãƒ³ãƒãƒ¼ã‚’é¸ã‚“ã§æ‹›å¾…ã‚’é€ã‚‹</button>
    </div>

    <script>
        const LIFF_ID = "2008718467-wSHMbZKY";
        let myProfile = null;

        liff.init({ liffId: LIFF_ID }).then(async () => {
            if (!liff.isLoggedIn()) liff.login();
            myProfile = await liff.getProfile();
        });

        async function sendInvitation() {
            const start = document.getElementById('start').value;
            const end = document.getElementById('end').value;
            if(!start || !end) { alert("æœŸé–“ã‚’æ­£ã—ãé¸æŠã—ã¦ãã ã•ã„"); return; }

            if (liff.isApiAvailable('shareTargetPicker')) {
                liff.shareTargetPicker([
                    {
                        "type": "flex",
                        "altText": "æ—¥ç¨‹èª¿æ•´ã®æ‹›å¾…çŠ¶ãŒå±Šãã¾ã—ãŸ",
                        "contents": {
                            "type": "bubble",
                            "body": {
                                "type": "box", "layout": "vertical",
                                "contents": [
                                    {"type": "text", "text": "ğŸ“… æ—¥ç¨‹èª¿æ•´ã®æ‹›å¾…", "weight": "bold", "size": "xl", "color": "#00b900"},
                                    {"type": "text", "text": `${myProfile.displayName}ã•ã‚“ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã®ãŠèª˜ã„ã§ã™ï¼`, "size": "sm", "margin": "md", "wrap": true},
                                    {"type": "separator", "margin": "lg"},
                                    {"type": "box", "layout": "vertical", "margin": "lg", "contents": [
                                        {"type": "text", "text": "å¸Œæœ›æœŸé–“", "size": "xs", "color": "#888888"},
                                        {"type": "text", "text": `${start} ã€œ ${end}`, "size": "md", "weight": "bold"}
                                    ]},
                                    {"type": "text", "text": "âš ï¸ å›ç­”æœŸé™: 12æ™‚é–“ä»¥å†…", "size": "xs", "color": "#ff0000", "margin": "md"}
                                ]
                            },
                            "footer": {
                                "type": "box", "layout": "vertical", "spacing": "sm",
                                "contents": [
                                    {
                                        "type": "button", "style": "primary", "color": "#00b900",
                                        "action": { "type": "uri", "label": "âœ… å‚åŠ ã™ã‚‹", "uri": liff.getOrigin() + "/answer?res=yes&host=" + myProfile.displayName }
                                    },
                                    {
                                        "type": "button", "style": "secondary",
                                        "action": { "type": "uri", "label": "âŒ è¡Œã‘ãªã„", "uri": liff.getOrigin() + "/answer?res=no" }
                                    }
                                ]
                            }
                        }
                    }
                ]).then(() => liff.closeWindow()).catch(err => console.error(err));
            }
        }
    </script>
</body>
</html>
